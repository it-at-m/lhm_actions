name: Require PR checklist

inputs:
  fail-missing:
    required: false
    default: "false"
    type: string
    description: Whether the action should fail if the PR contains no checklist

runs:
  using: "composite"
  steps:
    - name: Configure checklist requirement
      if: ${{ github.actor != 'dependabot[bot]' && github.actor != 'renovate[bot]' && github.event.pull_request.draft == false }}
      uses: mheap/require-checklist-action@efef3b1b39d03d12be5ce427c15064f287ba5843 # v2
      with:
        requireChecklist: ${{ inputs.fail-missing }}
        skipDescriptionRegex: .*\(optional\).*
        skipDescriptionRegexFlags: i
